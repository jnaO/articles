/* jQuery Tiny Pub/Sub - v0.7 - 10/27/2011
 * http://benalman.com/
 * Copyright (c) 2011 "Cowboy" Ben Alman; Licensed MIT, GPL */
(function($) {var o = $({});$.subscribe = function() {o.on.apply(o, arguments);};$.unsubscribe = function() {o.off.apply(o, arguments);};$.publish = function() {o.trigger.apply(o, arguments);};}(jQuery));

var booboo = booboo || {};
booboo = (function (parent, $, Raphael) {
  'use strict';

  var bear = parent.bear = parent.bear || {},
      paper = parent.paper = parent.paper ||Â Raphael('paper', 350, 350);




  bear.body = function () {
    var body = {},
        bearStrokes = ["M197.329,206.356c0.217-5.005,4.352-11.314,4.713-14.143c-8.993,0.289-19.437-9.574-22.917-21.469 c-3.482-11.894-5.512-30.46-2.611-38.583c1.359-3.805,7.543-10.443,11.314-13.055c3.771-2.611,18.565-9.863,26.979-11.314 c0.845,0.029,1.918,0.056,3.152,0.082c0.196-2.058,0.031-3.856-1.162-4.65c-2.941-1.958-9.025-1.74-15.335-4.134 c-6.309-2.394-26.444-11.245-33.071-13.055c-2.7-0.737-16.608-1.668-24.949-1.016c-1.151,0.09-0.583-2.009-0.508-2.684 c0.435-3.917,16.318-7.397,17.188-9.573c0.871-2.175-3.264-3.264-8.268-4.787c-5.004-1.522-11.532-2.611-17.188,1.523 c-4.566,3.336-10.662,12.547-12.982,17.406c-0.482,1.009-1.741,0.472-2.091,0.458c-1.108-0.045-0.158-2.852,0.712-5.897 c0.871-3.047,8.486-8.703,8.268-13.272c-0.217-4.568-5.874-2.829-10.099-2.61c-4.225,0.218-9.482,1.74-12.094,3.916 s-7.18,27.632-9.356,31.984c-2.175,4.351-12.402,16.535-16.318,20.887s-14.577,11.313-20.669,18.929 c-4.802,6.003-12.036,17.276-18.188,27.962c3.882,64.436,57.358,115.495,122.769,115.495c18.654,0,36.335-4.16,52.176-11.592 C197.321,232.28,197.111,211.36,197.329,206.356z",
                       "M197.329,206.356c0.217-5.005,4.352-11.314,4.713-14.143c-8.993,0.289-19.437-9.574-22.917-21.469 c-3.482-11.894-5.512-30.46-2.611-38.583c1.359-3.805,7.543-10.443,11.314-13.055c3.771-2.611,18.565-9.863,26.979-11.314 c0.845,0.029,1.918,0.056,3.152,0.082c0.196-2.058,0.031-3.856-1.162-4.65c-2.941-1.958-9.025-1.74-15.335-4.134 c-6.309-2.394-26.444-11.245-33.071-13.055c-2.7-0.737-16.608-1.668-24.949-1.016c-1.151,0.09-0.583-2.009-0.508-2.684 c0.435-3.917,6.32-11.786,7.19-13.962c0.871-2.175-0.587-4.534-5.592-6.058c-5.004-1.522-8.938,0.923-14.594,5.058 c-4.566,3.336-5.934,14.672-8.254,19.531c-0.482,1.009-1.741,0.472-2.091,0.458c-1.108-0.045-0.158-2.852,0.712-5.897 c0.871-3.047,3.65-11.84,3.432-16.409c-0.217-4.568-8.639-2.096-12.863-1.877c-4.225,0.218-8.897,4.736-11.509,6.912 s-0.165,27.039-2.34,31.392c-2.175,4.351-12.402,16.535-16.318,20.887s-14.577,11.313-20.669,18.929 c-4.802,6.003-12.036,17.276-18.188,27.962c3.882,64.436,57.358,115.495,122.769,115.495c18.654,0,36.335-4.16,52.176-11.592 C197.321,222.28,197.111,211.36,197.329,206.356z"],
        shape = paper.path(bearStrokes[0]).attr({'stroke-width': 0,fill: '90-#4E5F75-#8192A3'});
    body.ainmateBear = function () {
      shape.animate({path:bearStrokes[1]}, 200, '>', function () {
        shape.animate({path:bearStrokes[0]}, 500, 'bounce', function () {
          // body.ainmateBear();
        });
      });
    };
    body.init = function () {
      $.subscribe('noseComplete', body.ainmateBear);
    }
    return body;
  };





  bear.nose = function () {
    var nose = {},
        ainmateNose = function () {
          $.publish('noseStart');
          setTimeout(function () {
            nose.shape.animate({path:nose.noseStrokes[1]}, 90, '<', function () {
              nose.shape.animate({path:nose.noseStrokes[0]}, 60, '>', function () {
                nose.shape.animate({path:nose.noseStrokes[1]}, 130, '>', function () {
                  nose.shape.animate({path:nose.noseStrokes[0]}, 70, '>', function () {
                    $.publish('noseComplete');
                    ainmateNose();
                  } );
                });
              });
            });
          }, 4660);
        };

    nose.noseStrokes = ["M235.985,124.329c-0.579-5.803,4.298-5.926,11.604-8.993c5.372-2.254,6.813-4.084,8.892-4.734 c-0.062-0.07-0.124-0.146-0.189-0.197c-1.002-0.801-5.25-1.325-10.731-1.681c-8.804-0.57-20.788-0.706-27.601-0.849 c-1.234-0.026-2.307-0.053-3.152-0.082c-8.414,1.451-23.209,8.703-26.979,11.314c-3.771,2.611-9.956,9.25-11.314,13.055 c-2.9,8.123-0.871,26.689,2.611,38.583c3.481,11.895,13.925,21.758,22.917,21.469c8.993-0.29,18.857-8.122,24.949-13.055 c6.092-4.932,26.4-29.591,29.3-36.844c1.089-2.725,1.77-7.58,2.042-12.703c-2.852,0.951-7.044,2.841-12.363,2.841 C240.29,132.453,236.565,130.131,235.985,124.329z",
                       "M233.985,122.329c-0.579-5.803,4.298-5.926,11.604-8.993c5.372-2.254,6.813-4.084,8.892-4.734 c-0.062-0.07-0.124-0.146-0.189-0.197c-1.002-0.801-5.25-1.325-10.731-1.681c-8.804-0.57-18.788,1.294-25.601,1.151 c-1.234-0.026-2.307-0.053-3.152-0.082c-8.414,1.451-23.209,8.703-26.979,11.314c-3.771,2.611-9.956,9.25-11.314,13.055 c-2.9,8.123-0.871,26.689,2.611,38.583c3.481,11.895,13.925,21.758,22.917,21.469c8.993-0.29,18.857-8.122,24.949-13.055 c6.092-4.932,24.4-31.591,27.3-38.844c1.089-2.725,1.77-7.58,2.042-12.703c-2.852,0.951-7.044,2.841-12.363,2.841 C238.29,130.453,234.565,128.131,233.985,122.329z"];
    nose.shape = paper.path(nose.noseStrokes[0]).attr({ 'stroke-width': 0, fill: '90-#ADBAC9-#BCC8D1' });
    nose.init = function () {
      ainmateNose();
    }
    return nose;
  };




  bear.noseTip = function () {
    var noseTip = {},
        ainmateNoseTip = function () {
          setTimeout(function () {
            noseTip.shape.animate({path:noseTip.noseTipStrokes[1]}, 90, '<', function () {
              noseTip.shape.animate({path:noseTip.noseTipStrokes[0]}, 60, '>', function () {
                noseTip.shape.animate({path:noseTip.noseTipStrokes[1]}, 130, '>', function () {
                  noseTip.shape.animate({path:noseTip.noseTipStrokes[0]}, 70, '>', function () {

                  } );
                });
              });
            });
          }, 4660);
        };
    noseTip.noseTipStrokes = ["M256.481,110.601c-2.079,0.65-3.52,2.48-8.892,4.734c-7.306,3.067-12.183,3.19-11.604,8.993 c0.58,5.803,4.304,8.124,9.985,8.124c5.319,0,9.511-1.89,12.363-2.841C258.767,121.408,258.149,112.527,256.481,110.601z",
                      "M254.481,108.601c-2.079,0.65-3.52,2.48-8.892,4.734c-7.306,3.067-12.183,3.19-11.604,8.993 c0.58,5.803,4.304,8.124,9.985,8.124c5.319,0,9.511-1.89,12.363-2.841C256.767,119.408,256.149,110.527,254.481,108.601z"];
    noseTip.shape = paper.path(noseTip.noseTipStrokes[0]).attr({ 'stroke-width': 0, fill: '90-#788B9E-#8493A1' });
    noseTip.init = function () {
      ainmateNoseTip();
      $.subscribe('noseStart', ainmateNoseTip);
    }
    return noseTip;
  };





  bear.init = function () {
    bear.body().init();
    bear.nose().init();
    bear.noseTip().init();
  };

  return parent;
})(booboo || {}, jQuery, Raphael);